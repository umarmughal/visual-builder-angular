<ng-container *ngFor="let item of objectKeys(renderedFlyoutItems)">
  <ng-container *ngTemplateOutlet="flyoutTpl; context: {$implicit: renderedFlyoutItems[item]}"></ng-container>
</ng-container>
<div [ngClass]="{
    vb__menuTop: true,
    vb__menuTop__mobileToggled: isMobileMenuOpen,
    vb__menuTop__toggled: isMenuCollapsed,
    vb__menuTop__unfixed: isMenuUnfixed,
    vb__menuTop__shadow: isMenuShadow,
    vb__menuTop__flyout: menuType === 'flyout',
    vb__menuTop__compact: menuType === 'compact',
    vb__menuTop__blue: menuColor === 'blue',
    vb__menuTop__white: menuColor === 'white',
    vb__menuTop__gray: menuColor === 'gray',
    vb__menuFlyout__black: flyoutMenuColor === 'dark' && menuType !== 'default',
    vb__menuFlyout__white: flyoutMenuColor === 'white' && menuType !== 'default',
    vb__menuFlyout__gray: flyoutMenuColor === 'gray' && menuType !== 'default'
  }">
  <div class="vb__menuTop__outer">
    <a href="javascript: void(0);" class="vb__menuTop__mobileToggleButton" (click)="toggleMobileMenu()">
      <span></span>
    </a>
    <a href="javascript: void(0);" class="vb__menuTop__logo">
      <div class="vb__menuTop__logo__letter">A</div>
      <div class="vb__menuTop__logo__name">{{ logo }}</div>
      <div class="vb__menuTop__logo__descr">{{ description }}</div>
    </a>
    <perfect-scrollbar>
      <div class="vb__menuTop__container">
        <ul class="vb__menuTop__list">
          <li class="vb__menuTop__item">
            <a href="javascript: void(0);" class="vb__menuTop__link" (click)="toggleSettings()">
              <i class="fe fe-settings vb__menuTop__icon"></i>
              <span>Settings</span>
            </a>
          </li>
          <li class="vb__menuTop__item">
            <a href="https://docs.sellpixels.com/" class="vb__menuTop__link" target="_blank" rel="noopener noreferrer">
              <i class="fe fe-compass vb__menuTop__icon"></i>
              <span>Documentation</span>
            </a>
          </li>
          <ng-container *ngFor="let item of menuData">
            <ng-container *ngTemplateOutlet="itemTpl; context: {$implicit: item}"></ng-container>
            <ng-container *ngTemplateOutlet="submenuTpl; context: {$implicit: item}"></ng-container>
          </ng-container>
        </ul>
      </div>
    </perfect-scrollbar>
  </div>
</div>
<a href="javascript: void(0);" class="vb__menuTop__backdrop" (click)="toggleMobileMenu()"></a>

<ng-template #itemTpl let-item>
  <ng-container *ngIf="!item.children && !item.category">
    <li class="vb__menuTop__item" [ngClass]="{vb__menuTop__item__active: item.key === activeItem}">
      <a [routerLink]="item.url ? item.url : 'javascript: void(0)'" class="vb__menuTop__link">
        <i *ngIf="item.icon" class="vb__menuTop__icon" [ngClass]="item.icon"></i>
        <span>{{ item.title }}</span>
        <span *ngIf="item.count" class="badge text-white bg-blue-light float-right ml-2 mt-1 px-2">{{ item.count
          }}</span>
      </a>
    </li>
  </ng-container>
</ng-template>
<ng-template #submenuTpl let-item>
  <ng-container *ngIf="item.children">
    <li class="vb__menuTop__item vb__menuTop__submenu"
      [ngClass]="{vb__menuTop__submenu__active: item.key === activeSubmenu}">
      <a href="javascript: void(0);" class="vb__menuTop__link" (click)="handleSubmenuClick(item.key)"
        (mouseenter)="handleFlyoutOver($event, item.key, item.children)" (mouseleave)="handleFlyoutOut(item.key)">
        <i *ngIf="item.icon" class="vb__menuTop__icon" [ngClass]="item.icon"></i>
        <span>{{ item.title }}</span>
        <span *ngIf="item.count" class="badge text-white bg-blue-light float-right ml-2 mt-1 px-2">{{ item.count
          }}</span>
      </a>
      <ul class="vb__menuTop__list">
        <ng-container *ngFor="let item of item.children">
          <ng-container *ngTemplateOutlet="itemTpl; context: {$implicit: item}"></ng-container>
        </ng-container>
      </ul>
    </li>
  </ng-container>
</ng-template>
<ng-template #flyoutTpl let-item>
  <div @flyoutAnimation [ngStyle]="{
        left: item.itemDimensions.left + item.itemDimensions.width / 2 + 'px',
        top: item.itemDimensions.top + item.itemDimensions.height + 'px'
      }" class="vb__menuFlyout" [ngClass]="{
      vb__menuFlyoutTop: menuLayoutType === 'top',
      vb__menuFlyout__black: flyoutMenuColor === 'dark',
      vb__menuFlyout__white: flyoutMenuColor === 'white',
      vb__menuFlyout__gray: flyoutMenuColor === 'gray'
    }">
    <ul class="vb__menuTop__list" (mouseenter)="handleFlyoutContainerOver(item.key)"
      (mouseleave)="handleFlyoutOut(item.key)">
      <ng-container *ngFor="let item of item.items">
        <ng-container *ngTemplateOutlet="itemTpl; context: {$implicit: item}"></ng-container>
      </ng-container>
    </ul>
  </div>
</ng-template>